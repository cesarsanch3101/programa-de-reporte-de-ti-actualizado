{% extends 'layout.html' %}

{% block title %}Configuración de Correo Electrónico{% endblock %}

{% block content %}
<div class="form-container">
    <h2>⚙️ Configuración del Servidor de Correo (SMTP)</h2>
    <p style="margin-top: -15px; margin-bottom: 20px; font-size: 0.9em; color: #555;">
        Introduce los datos para el envío de notificaciones. Se recomienda usar una <strong>contraseña de aplicación</strong> si usas Gmail u otro proveedor similar.
    </p>
    
    <form method="post">
        <div class="form-group">
            <label for="mail_server">Servidor SMTP:</label>
            <input type="text" id="mail_server" name="mail_server" value="{{ config.get('MAIL_SERVER', '') }}" required placeholder="ej: smtp.gmail.com">
        </div>
        <div class="form-group">
            <label for="mail_port">Puerto:</label>
            <input type="number" id="mail_port" name="mail_port" value="{{ config.get('MAIL_PORT', '587') }}" required>
        </div>
        <div class="form-group">
            <label for="mail_username">Correo de Salida (Username):</label>
            <input type="email" id="mail_username" name="mail_username" value="{{ config.get('MAIL_USERNAME', '') }}" required placeholder="ej: notificaciones@tuempresa.com">
        </div>
        <div class="form-group">
            <label for="mail_password">Contraseña de Aplicación:</label>
            <input type="password" id="mail_password" name="mail_password" value="{{ config.get('MAIL_PASSWORD', '') }}" required>
        </div>
        <div class="form-group" style="display: flex; align-items: center; background-color: #f8f9fa; padding: 10px; border-radius: 5px;">
            <input type="checkbox" id="mail_use_tls" name="mail_use_tls" {% if config.get('MAIL_USE_TLS') == 'True' %}checked{% endif %} style="width: auto; height: 20px; margin-right: 10px;">
            <label for="mail_use_tls" style="margin-bottom: 0; font-weight: normal;">Usar Cifrado TLS (Recomendado)</label>
        </div>
        
        <button type="submit" class="btn btn-primary">Guardar Configuración</button>
    </form>
    <a href="{{ url_for('dashboard') }}" style="display: block; text-align: center; margin-top: 1em;">Volver al Dashboard</a>
</div>
{% endblock %}